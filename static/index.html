<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>To-Do List</title>

  <link rel="stylesheet" href="/static/styles.css" />
  <!-- Bootstrap -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
  />
  <!-- Flatpickr UI -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
  />
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/dark.css"
  />
</head>

<body>
  <div class="app-shell d-flex">
    <!-- sidebar here -->
    <aside class="sidebar p-3">
      <h5 class="sidebar-title">Lists</h5>

      <div class="sidebar-section">
        <div class="sidebar-section-header">Personal</div>
        <button
          id="myTasksBtn"
          class="sidebar-item sidebar-item-active"
          data-list-type="personal"
        >
          My Tasks
        </button>
      </div>

      <div class="sidebar-section mt-3">
        <div class="sidebar-section-header">Collaborative</div>
        <div id="collabListContainer"></div>

        <button id="newCollabBtn" class="sidebar-item sidebar-item-new">
          + New collaborative list
        </button>
      </div>
    </aside>

    <!-- main panel here -->
    <main class="main-panel flex-grow-1 p-4">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <div>
          <h1 class="mb-1">My To-Do List</h1>
          <div id="welcome-user" class="fw-bold small"></div>
          <div id="current-list-name" class="text-muted small"></div>
        </div>

        <div>
          <button class="nav-btn" id="profileBtn">Profile</button>
          <button class="nav-btn" id="logoutBtn">Logout</button>
        </div>
      </div>

      <!-- collab metadata + invite -->
      <div id="collab-meta" class="collab-meta hidden">
        <div id="collab-owner-label" class="small text-muted"></div>
        <form id="inviteForm" class="d-flex gap-2">
          <input
            type="text"
            id="invite-username"
            class="form-control form-control-sm"
            placeholder="Invite by username/email"
          />
          <button class="btn btn-sm btn-outline-light" type="submit">
            Invite
          </button>
        </form>
      </div>

      <form id="taskForm" class="row g-2 mt-3">
        <div class="col-md-4">
          <input
            id="title"
            class="form-control"
            placeholder="Task title"
            required
          />
        </div>
        <div class="col-md-3">
          <input
            id="due_date"
            class="form-control flatpickr-date"
            placeholder="Select Due Date"
          />
        </div>
        <div class="col-md-3">
          <input
            id="due_time"
            class="form-control flatpickr-time"
            placeholder="Select Time"
          />
        </div>

        <div class="col-md-2 d-flex">
          <select id="priority" class="form-select">
            <option value="Low" selected>Low</option>
            <option value="Mid">Mid</option>
            <option value="High">High</option>
          </select>
        </div>

        <div class="col-12">
          <button class="btn btn-primary w-100">Add Task</button>
        </div>
      </form>

      <ul id="list" class="mt-3"></ul>
    </main>
  </div>

  <!-- toast Message -->
  <div id="toast" class="toast hidden">
    <div id="toast-msg"></div>
    <button id="toast-undo" class="toast-undo hidden">Undo</button>
  </div>


  <!-- create collab list modal -->
  <div id="newCollabModal" class="modal-overlay hidden">
    <div class="modal-box">
      <h3 class="modal-title">New collaborative list</h3>
      <p class="modal-message">Give your list a name.</p>

      <input
        type="text"
        id="new-collab-name"
        class="form-control modal-input"
        placeholder="e.g. Project Alpha"
      />

      <div class="modal-buttons">
        <button id="newCollabCancel" class="modal-btn cancel">Cancel</button>
        <button id="newCollabCreate" class="modal-btn primary">Create</button>
      </div>
    </div>
  </div>


  <!-- delete confirm modal -->
  <div id="deleteModal" class="modal-overlay hidden">
    <div class="modal-box">
      <h3 class="modal-title">Delete Task?</h3>
      <p class="modal-message">Are you sure you want to delete this task?</p>

      <div class="modal-buttons">
        <button id="deleteCancel" class="modal-btn cancel">Cancel</button>
        <button id="deleteConfirm" class="modal-btn delete">Delete</button>
      </div>
    </div>
  </div>

  <!-- Flatpickr JS -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <!-- main JS script -->
  <script src="/static/script.js"></script>
</body>
</html>
